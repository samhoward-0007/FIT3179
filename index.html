<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.5.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.0"></script>
  <link rel="stylesheet" type="text/css" href="styles.css" media="all">
</head>
<body>
  <h1 id="main-title"><span style="color: #b30000;">Air Pollution</span> Across Australia</h1>
  <p id="context-paragraph">
    This visualization provides an in-depth look at <span style="color: #b30000;">air pollution</span> across Australia, both geographically and by specific <span style="color: #b30000;">pollutant types</span>. The distribution of <span style="color: #b30000;">pollution</span> across various regions is illustrated to indicate the intensity of <span style="color: #b30000;">pollutants</span> and the breakdown of quantities for individual <span style="color: #b30000;">pollutants</span>, showing which <span style="color: #b30000;">contaminants</span> contribute the most to <span style="color: #b30000;">air pollution.</span> <br><br>
    
    A key pollutant visualized is <span style="color: #b30000;">PM2.5 (Particulate Matter 2.5)</span>, which refers to fine <span style="color: #b30000;">inhalable particles</span> with diameters that are generally 2.5 micrometers or smaller. These particles are particularly <span style="color: #b30000;">harmful</span> because they can penetrate deep into the lungs and even enter the <span style="color: #b30000;">bloodstream</span>, leading to serious health issues like respiratory diseases and <span style="color: #b30000;">cardiovascular problems</span>. <br><br>
    
    All values are in kilograms (kg) and are normalized by the population of the state the value belongs to.
  </p>
  <div id="dashboard">
    <div class="chart-card">
      <h2>Key Pollutes by Region</h2>
      <select id="pollute-selector">
          <option value="pm_2_5">PM2.5</option>
          <option value="Nitrogen_Oxides">Nitrogen Oxides</option>
          <option value="Carbon_monoxide">Carbon Monoxide</option>
      </select>
      <div id="choropleth_map"></div>
    </div>
    <div class="chart-card">
      <h2>Key Pollutant Types Breakdown</h2>
      <select id="state-selector">
        <option value="VIC">VIC</option>
        <option value="NSW">NSW</option>
        <option value="ACT">ACT</option>
        <option value="SA">SA</option>
        <option value="QLD">QLD</option>
        <option value="NT">NT</option>
        <option value="WA">WA</option>
        <option value="TAS">TAS</option>
    </select>
    <div id="pollute_bar_chart"></div>
    </div>
    <p> This chart demonstrates the breakdown of years lost to <span style="color: #b30000;">diseases</span> attributed to poor air quality <br>
      It is measured in years based of <span style="color: #b30000;">shortened life expectancy </span> from each disease due to <span style="color: #b30000;"> air pollution.</span>
    </p>
    <div class="chart-card">
      <h2>Years Lost to Diseases</h2>
      <div id="tree_map"></div>
      <h4>Total Years Lost: 29014</h4>
    </div>
  </div>
</body>
<script type="text/javascript">

var spec1 = "choropleth_map.vg.json";

function updateMap(pollute) {
  vegaEmbed('#choropleth_map', spec1).then(function(result) {
    result.view.signal("selectedPollute", pollute).run();
  }).catch(console.error);
}

document.getElementById('pollute-selector').addEventListener('change', function() {
  const selectedPollute = this.value;
  updateMap(selectedPollute);
});

updateMap(document.getElementById('pollute-selector').value);



var spec2 = "pollute_bar_chart.vg.json";
function updateChart(state) {
  vegaEmbed('#pollute_bar_chart', spec2).then(function(result) {
    result.view.signal("selectedState", state).run();
  }).catch(console.error);
}

document.getElementById('state-selector').addEventListener('change', function() {
  const selectedState = this.value;
  updateChart(selectedState);
});

updateChart(document.getElementById('state-selector').value);

var spec3 = "tree_map.vg.json";
vegaEmbed('#tree_map', spec3).then(function(result) {
    result.view.signal().run();
}).catch(console.error);

</script>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f4f4f9;
    color: #333;
  }
  h1#main-title {
    text-align: center;
    margin-top: 20px;
    font-size: 2.5em;
    color: #2c3e50;
  }
  p#context-paragraph {
    max-width: 900px;
    margin: 0 auto;
    text-align: center;
    font-size: 1.1em;
    color: #7f8c8d;
    line-height: 1.6;
    padding: 20px;
  }
  #dashboard {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    padding: 20px;
  }
  .chart-card {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    padding: 20px;
    width: 100%;
    max-width: 900px;
    box-sizing: border-box;
  }
  .chart-card h2 {
    text-align: center;
    font-size: 1.5em;
    margin-bottom: 15px;
    color: #34495e;
  }
  #choropleth_map, #pollute_bar_chart {
    width: 90%;
    height: 400px;
  }
  @media (max-width: 768px) {
    .chart-card {
      width: 80%;
    }
    #choropleth_map, #pollute_bar_chart {
      height: 300px;
    }
  }

/* Data Sources: 
https://www.npi.gov.au/npidata/action/load/download-result;jsessionid=1327D8460B42E9041FF454AA95E100F3/criteria/destination/ALL/substance/92/source-type/ALL/subthreshold-data/Yes/substance-name/Particulate%2BMatter%2B2.5%2Bum/year/2023 
https://data.gov.au/data/dataset/2021-air-quality-years-of-life-lost-attributed-to-poor-air-quality-in-australia 
*/
</style>
</html>